import{d as E,r as T,l as I,b as p,g as k,p as V,a as g,f as C,e as n,i as w,I as y,t as h,j as S,n as L,T as j,V as F,aa as R,u as A,c as _,ab as D,o as M,D as N,F as x,q as B,ac as K,a1 as O,B as q}from"./index-CfpXh_Sk.js";import{_ as P}from"./_plugin-vue_export-helper-DlAUqK2U.js";class J{static async handleResponse(t){if(!t.ok)try{const e=await t.json(),s=e.error||e.message||`API request failed: ${t.status}`,i=new Error(s);throw e.errorCode&&(i.errorCode=e.errorCode),i}catch(e){throw e instanceof Error?e:new Error(`API request failed: ${t.status} ${t.statusText}`)}return t}static async createOrUpdatePlanTemplateWithTool(t){try{const e=await fetch("/api/plan-template/create-or-update-with-tool",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return await(await this.handleResponse(e)).json()}catch(e){throw console.error("Failed to create or update plan template with tool:",e),e}}static async getPlanTemplateConfigVO(t){try{const e=await fetch(`/api/plan-template/${t}/config`);return await(await this.handleResponse(e)).json()}catch(e){throw console.error("Failed to get plan template config VO:",e),e}}static async getAllPlanTemplateConfigVOs(){try{const t=await fetch("/api/plan-template/list-config");return await(await this.handleResponse(t)).json()}catch(t){throw console.error("Failed to get all plan template config VOs:",t),t}}static async deletePlanTemplate(t){try{const e=await fetch("/api/plan-template/delete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({planId:t})});return await(await this.handleResponse(e)).json()}catch(e){throw console.error("Failed to delete plan template:",e),e}}static async exportAllPlanTemplates(){try{const t=await fetch("/api/plan-template/export-all");return await(await this.handleResponse(t)).json()}catch(t){throw console.error("Failed to export all plan templates:",t),t}}static async importPlanTemplates(t){try{const e=await fetch("/api/plan-template/import-all",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return await(await this.handleResponse(e)).json()}catch(e){throw console.error("Failed to import plan templates:",e),e}}static async generatePlanTemplateId(){try{const t=await fetch("/api/plan-template/generate-plan-template-id",{method:"GET",headers:{"Content-Type":"application/json"}});return(await(await this.handleResponse(t)).json()).planTemplateId}catch(t){throw console.error("Failed to generate plan template ID:",t),t}}}const U={class:"toast-header"},z={class:"toast-title"},G={class:"toast-content"},H=E({name:"ToastNotification",__name:"Toast",setup(l,{expose:t}){const e=T(!1),s=T(""),i=T("success"),v=T("carbon:checkmark"),f=T(3e3),a=(d,m="success",r=3e3)=>{s.value=d,i.value=m,v.value=m==="success"?"carbon:checkmark":"carbon:error",f.value=r,e.value=!0},o=()=>{e.value=!1};return t({show:a}),(d,m)=>(p(),I(F,{to:"body"},[k(j,{name:"modal"},{default:V(()=>[e.value?(p(),g("div",{key:0,class:"toast-overlay",onClick:o},[n("div",{class:L(["toast-modal",`toast--${i.value}`]),onClick:m[0]||(m[0]=S(()=>{},["stop"]))},[n("div",U,[k(w(y),{icon:v.value,class:"toast-icon"},null,8,["icon"]),n("span",z,h(i.value==="success"?"Success":"Error"),1)]),n("div",G,[n("span",null,h(s.value),1)]),n("div",{class:"toast-actions"},[n("button",{class:"toast-btn toast-btn--primary",onClick:o},"Confirm")])],2)])):C("",!0)]),_:1})]))}}),W=P(H,[["__scopeId","data-v-e0db5b02"]]);let $=null;const me=()=>{if(!$){const l=R(W),t=document.createElement("div");document.body.appendChild(t),$=l.mount(t)}return{success:(l,t)=>{$?.show(l,"success",t)},error:(l,t)=>{$?.show(l,"error",t)}}},Q={class:"language-switcher"},X=["title"],Y={class:"current-lang"},Z={class:"dropdown-header"},ee={class:"language-options"},te=["disabled","onClick"],ae={class:"lang-code"},se={class:"lang-name"},oe=E({__name:"LanguageSwitcher",setup(l){const{locale:t}=A(),e=T(!1),s=_(()=>t.value),i=_(()=>D.opts),v=_(()=>{const r=i.value.find(c=>c.value===s.value);return r?r.title:"Unknown"}),f=()=>{e.value=!e.value},a=T(!1),o=async r=>{if(!(a.value||s.value===r))try{a.value=!0,await K(r),e.value=!1}catch(c){console.error("Failed to change language:",c),e.value=!1}finally{a.value=!1}},d=r=>{r.target.closest(".language-switcher")||(e.value=!1)},m=r=>{r.key==="Escape"&&(e.value=!1)};return M(()=>{document.addEventListener("click",d),document.addEventListener("keydown",m)}),N(()=>{document.removeEventListener("click",d),document.removeEventListener("keydown",m)}),(r,c)=>(p(),g("div",Q,[n("button",{class:"language-btn",onClick:f,title:r.$t("language.switch")},[k(w(y),{icon:"carbon:translate",width:"18"}),n("span",Y,h(v.value),1),k(w(y),{icon:e.value?"carbon:chevron-up":"carbon:chevron-down",width:"14",class:"chevron"},null,8,["icon"])],8,X),e.value?(p(),g("div",{key:0,class:"language-dropdown",onClick:c[1]||(c[1]=S(()=>{},["stop"]))},[n("div",Z,[n("span",null,h(r.$t("language.switch")),1),n("button",{class:"close-btn",onClick:c[0]||(c[0]=u=>e.value=!1)},[k(w(y),{icon:"carbon:close",width:"16"})])]),n("div",ee,[(p(!0),g(x,null,B(i.value,u=>(p(),g("button",{key:u.value,class:L(["language-option",{active:s.value===u.value,loading:a.value&&s.value!==u.value}]),disabled:a.value,onClick:b=>o(u.value)},[n("span",ae,h(u.value.toUpperCase()),1),n("span",se,h(u.title),1),a.value&&s.value!==u.value?(p(),I(w(y),{key:0,icon:"carbon:circle-dash",width:"16",class:"loading-icon"})):s.value===u.value?(p(),I(w(y),{key:1,icon:"carbon:checkmark",width:"16",class:"check-icon"})):C("",!0)],10,te))),128))])])):C("",!0),e.value?(p(),g("div",{key:1,class:"backdrop",onClick:c[2]||(c[2]=u=>e.value=!1)})):C("",!0)]))}}),fe=P(oe,[["__scopeId","data-v-6951f85e"]]),ne={class:"modal-header"},le={class:"header-content"},re=["title"],ce={class:"modal-content"},ie={class:"modal-footer"},ue=E({name:"ModalDialog",__name:"index",props:{modelValue:{type:Boolean,required:!0},title:{type:String,default:""},statusIcon:{type:String,default:""},statusIconClass:{type:String,default:""},statusIconTitle:{type:String,default:""}},emits:["update:modelValue","confirm"],setup(l,{emit:t}){const e=l,s=t,i=a=>{a.target===a.currentTarget&&(a.stopPropagation(),a.preventDefault())},v=a=>{if(!a||!(a instanceof HTMLElement))return!1;const o=a.tagName.toLowerCase(),d=a.isContentEditable;return o==="input"||o==="textarea"||o==="select"||d},f=a=>{e.modelValue&&(v(a.target)||(a.key==="Escape"?s("update:modelValue",!1):a.key==="Enter"&&!a.shiftKey&&!a.ctrlKey&&!a.metaKey&&s("confirm")))};return M(()=>{document.addEventListener("keydown",f)}),N(()=>{document.removeEventListener("keydown",f)}),(a,o)=>(p(),I(F,{to:"body"},[k(j,{name:"modal"},{default:V(()=>[l.modelValue?(p(),g("div",{key:0,class:"modal-overlay",onClick:i},[n("div",{class:"modal-container",onClick:o[3]||(o[3]=S(()=>{},["stop"]))},[n("div",ne,[n("div",le,[n("h3",null,h(l.title),1),l.statusIcon?(p(),g("div",{key:0,class:L(["status-icon",l.statusIconClass]),title:l.statusIconTitle},[k(w(y),{icon:l.statusIcon,width:"16"},null,8,["icon"])],10,re)):C("",!0)]),n("button",{class:"close-btn",onClick:o[0]||(o[0]=d=>a.$emit("update:modelValue",!1))},[k(w(y),{icon:"carbon:close"})])]),n("div",ce,[O(a.$slots,"default",{},void 0,!0)]),n("div",ie,[O(a.$slots,"footer",{},()=>[n("button",{class:"cancel-btn",onClick:o[1]||(o[1]=d=>a.$emit("update:modelValue",!1))},h(a.$t("common.cancel")),1),n("button",{class:"confirm-btn",onClick:o[2]||(o[2]=d=>a.$emit("confirm"))},h(a.$t("common.confirm")),1)],!0)])])])):C("",!0)]),_:3})]))}}),he=P(ue,[["__scopeId","data-v-8607d649"]]);function ve(){return{handleImport:async(t,e={})=>{const s=t.target,i=s.files?.[0];if(!i)return;const{showConfirm:v=!1,confirmMessage:f,onSuccess:a,onError:o,onReload:d,onSingleTemplateImported:m}=e;try{const r=await i.text(),c=JSON.parse(r);if(!Array.isArray(c)){const b="Invalid format: expected an array of plan templates";if(s.value="",o)o(b);else throw new Error(b);return}if(v&&f&&!confirm(f)){s.value="";return}const u=await J.importPlanTemplates(c);if(u.success){if(a&&await a(u,c),d&&await d(),m&&u.successCount===1&&c.length===1){const b=c[0];b.planTemplateId&&await m(b)}}else o?o("Import failed"):console.error("Import failed")}catch(r){console.error("Failed to import plan templates:",r);const c=r instanceof Error?r.message:"Failed to import plan templates";o&&o(c)}finally{s.value=""}}}}function ge(){const l=q({show:!1,text:"",type:"success"});return{toast:l,showToast:(e,s="success")=>{console.log(`Showing toast: ${e}, Type: ${s}`),l.text=e,l.type=s,l.show=!0;const i=s==="error"?5e3:3e3;console.log(`Toast will be automatically hidden after ${i}ms`),setTimeout(()=>{l.show=!1,console.log("Toast hidden")},i)}}}export{fe as L,he as M,J as P,ve as a,ge as b,me as u};
//# sourceMappingURL=useToast-EHC0Ke9i.js.map
